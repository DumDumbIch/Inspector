# Inspector
## Description
Приложение позволяет получать упакованные данные посредством SMS-сообщения от системы автоматики котельной и отображение ее в удобном для пользователя виде. Также обеспечивается проверка состояния параметров и уведомление о нештатных и аварийных ситуациях.

Отработка взаимодействия с объектом управления ведется на примере реального объекта: котельная ОАО "Шуйская Водка" (Ивановская обл., г.Шуя). Формирование упакованного SMS-сообщения о состоянии объекта производится либо по запросу со стороны приложения, либо системой автоматики котельной при возникновении нештатной или аварийной ситуации, либо по расписанию.
На объекте установлена система автоматики на базе ПЛК Segnetics SMH4 с GSM-модемом, который обеспечивает обмен SMS-сообщениями с административным и оперативно-ремонтным персоналом в соответствии с предоставленными уровнями доступа. Эта информация прописывается в конфигурации контроллера на этапе программирования системы и не может быть изменена удаленно.

## Application Version 0
Первый вариант приложения планируется для конкретного заказчика под конкретную котельную. Пользователи - начальник котельной, главный инженер, операторы котельной, диспетчер.
Авторизация в данной версии приложения не предусматривается, т.к. получить информацию может только сотрудник, телефонный номер которого занесен в базу данных контроллера системы автоматики котельной, при условии, что у него есть соответсвующие права доступа, которые также прописаны в контроллере. Т.о. получить информацию постороннему человеку даже при установке приложения невозможно.
При неактивном состоянии - запрос информации по расписанию и вывод push-уведомлений о нештатных и аварийных ситуациях.
Первый экран - контролируемые параметры - выделение цветом в зависимости от состояния. Своп экрана - запрос на обновление информации - отправка SMS с запросом, получение новых данных и обновление информации на экране.
Второй экран - настройка контролируемых параметров в приложении для вывода соответсвующих предупреждений и цветового выделения.
Третий экран - архив состояний объекта
Четвертый экран - журнал событий (нештатные и аварийные ситуации)

## Development plans
В дальнейшем планируется адаптировать приложение к системе диспетчеризации Кситал-GSM, которая используется достаточно широко в сфере удаленного контроля промышленных и частных объектов теплоснабжения. Сложность в том, что Кситал не предоставляет информацию в упакованном виде, а стандартное приложение для работы с данной системой производит запросы на считывание определенных участков флеш-памяти контроллера - вот так это организовали разработчики данной системы (это выяснилось в ходе беседы со службой технической поддержки завода-изготовителя). 
Поэтому на первоначальном этапе SMS будет много, в дальнейшем надеюсь на сотрудничество с заводом. Но в принципе нынешние тарифы позволяют сделать несколько запросов в день (лишь бы не засыпало сообщениями об аварии). Также система присылает отчет по расписанию (правда только на один номер) либо по запросу, но не в упакованном, а в текстовом виде. Так-что есть с чем работать. 

Основная трудность - реализовать в приложении возможность определения состава оборудования и отслеживаемых параметров при создания нового объекта. Первый вариант приложения создается под конкретный объект, поэтому конфигурация жестко прописана в приложении (класс /entity/BoilerPlant.kt). Но если реализовывать универсальное приложение, нужен другой подход. Какой - пока не знаю.
Хотя, если отталкиваться от того, что в системе Кситал набор параметров ограничен, а в системе на ПЛК - индивидуален и определяется программой - придется для свободно программируемых систем делать индивидуальные конфигурационные классы. Пока не придет идея получше)